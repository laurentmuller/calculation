{# Calculation panel #}
{% import 'macros/_icons.html.twig' as icons %}

<div id="main-panel" class="card mb-3">
	<div class="card-header d-print-none">
        <h1 class="card-title">
            {{ icons.icon('calculator', title, null, title_parameters) }}
        </h1>
    	<div>{{ form_errors(form) }}</div>
	</div>
	
	<div class="card-body">
		{{ form_row(form.customer, {disabled: not editable}) }}
		{{ form_row(form.description, {disabled: not editable}) }}
		<div class="form-row">
			<div class="col-md-4">
				{{ form_row(form.date, {disabled: not editable}) }}                                
			</div>
			<div class="col-md-4">
				{{ form_row(form.state, {disabled: not editable}) }}                                
			</div>
			<div class="col-md-4">
				{{ form_row(form.userMargin, {disabled: not editable, below: below|default(false), min_margin: min_margin|default(0) }) }}                                
			</div>
		</div>
	</div>
	
	<div class="card-footer d-print-none">    
        {%- if editable -%}
        	<div class="row">
				<div class="col-md-8">
                    {{ icons.button_submit() }}
                    {{ icons.button_cancel(cancel_path) }}
				</div>
				<div class="col-md-4 text-md-right">
					<small class="text-danger">{{ 'common.required'|trans }}</small>
				</div>
			</div>
        {%- else -%}
        	<div class="row">
        		<div class="col-md-3">
                    {{ icons.button_ok(cancel_path) }}
        		</div>
        		<div class="col-md-9 text-md-right">
        			<small class="text-danger">{{ 'calculation.edit.read_only'|trans({'%name%' : item.stateCode}) }}</small>
        		</div>
        	</div>
        {%- endif -%}
    </div>
</div>
