{% from 'macros/_attributes.html.twig' import attributes %}
{# add a flashbag message #}
{% macro addFlashbag(key, message) -%}
{%- set values = message|split('|') -%}
{%- set title = (values|length == 2) ? values[0] : ('flashbag.' ~ key)|trans -%}
{%- set content = (values|length == 2) ? values[1] : message -%}
<p class="flashbag d-none" data-type="{{ key }}" data-title="{{ title }}">{{ content }}</p>
{%- endmacro %}
{# add flashbag messages #}
{% apply spaceless %}
{% set flash_attributes = user_service.messageAttributes|merge({
    'target': '.page-content',
    'subtitle': app_name_version,
    'close-title': 'common.button_close'|trans,
    'margin-bottom': user_service.statusBar ? 49 : 20,
}) %}
<div id=flashbags class="d-none"{{ attributes(flash_attributes, 'data-') }}>
    {% for key, messages in app.flashes %}
        {% for message in messages %}{{- _self.addFlashbag(key, message) -}}{% endfor %}
    {% endfor %}
    {# add logout flashbag message if applicable #}
    {% if app.request.get('logout', '') == 'success' %}
        {{ _self.addFlashbag('success', 'security.logout.success'|trans({'%appname%': app_name_version})) }}
    {% endif %}
</div>
{% endapply %}
