{# macros #}
{% macro outputEntry(text) -%}
    <p class="mb-1 text-warning">{{ text }}</p>
{% endmacro %}
{% macro outputParam(value, popover=null) -%}
    {% set value = value|default('') %}
    <td class="text-success w-25"{% if popover %} data-custom-html="{{ popover|e }}" data-custom-title="{{ value }}"{% endif %}>
        <pre class="mb-0 fs-6">{{ value }}</pre>
    </td>
{% endmacro %}
{% macro outputDescription(value, display) -%}
<td>
    {{- value|default('')|raw -}}
    {%- if display == [] -%}
        <span class="text-warning"> (multiple values allowed)</span>
    {%- elseif display -%}
        <span class="text-warning"> [default: {{ display }}]</span>
    {%- endif -%}
</td>
{% endmacro %}
{% macro tooltipArgument(argument) -%}
<table class="table table-sm">
    <tr>
        <td>Required</td><td>:</td><td>{{ argument.is_required|json_encode }}</td>
    </tr>
    <tr>
        <td>Array</td><td>:</td><td>{{ argument.is_array|json_encode }}</td>
    </tr>
    {%- if argument.display -%}
        <tr><td>Default</td><td>:</td><td>{{ argument.display }}</td></tr>
    {% endif %}
</table>
{% endmacro %}
{% macro tooltipOption(option) -%}
<table class="table table-sm">
    <tr>
        <td>Accept Value</td><td>:</td><td>{{ option.accept_value|json_encode }}</td>
    </tr>
    <tr>
        <td>Value Required</td><td>:</td><td>{{ option.is_value_required|json_encode }}</td>
    </tr>
    <tr>
        <td>Multiple</td><td>:</td><td>{{ option.is_multiple|json_encode }}</td>
    </tr>
    {% if option.accept_value and option.display %}
        <tr><td>Default</td><td>:</td><td>{{ option.display }}</td></tr>
    {% endif %}
</table>
{% endmacro %}
{# content #}
<div class="content">
{# description #}
{% if command.description %}
    {{ _self.outputEntry('Description:') }}
    <p class="ms-2">{{ command.description }}</p>
{% endif %}
{# usage #}
{% if command.usage|length %}
    {{ _self.outputEntry('Usage:') }}
    {% for usage in command.usage %}
        <pre class="ms-2 fs-6">{{ usage }}</pre>
    {% endfor %}
{% endif %}
{# arguments #}
{% if command.definition.arguments|length %}
    {{ _self.outputEntry('Arguments:') }}
    <table class="table table-sm table-borderless ms-2">
        <tbody>
        {% for argument in command.definition.arguments %}
            <tr>
                {{ _self.outputParam(argument.name, _self.tooltipArgument(argument)) }}
                {{ _self.outputDescription(argument.description, argument.display) }}
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endif %}
{# options #}
{% if command.definition.options|length %}
    {{ _self.outputEntry('Options:') }}
    <table class="table table-sm table-borderless ms-2">
        <tbody>
        {% for option in command.definition.options %}
            {% if option.shortcut %}
                {%- set arg = option.shortcut ~ ', ' ~ option.name -%}
            {% else %}
                {%- set arg = '    ' ~ option.name -%}
            {% endif %}
            <tr>
                {{ _self.outputParam(arg, _self.tooltipOption(option)) }}
                {{ _self.outputDescription(option.description, option.display) }}
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endif %}
{# help #}
{% if command.help %}
    {{ _self.outputEntry('Help:') }}
    <pre class="ms-2 mb-0">{{ command.help|raw }}</pre>
{% endif %}
</div>
