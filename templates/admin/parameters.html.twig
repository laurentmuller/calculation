{# See http://symfony.com/doc/current/cookbook/form/form_customization.html#how-to-customize-an-individual-field #}
{% extends 'cards/card_edit.html.twig' %}

{% block _parameters_customer_url_widget -%}
<div class="input-group">
    {%- set type = type|default('url') -%}
    {{- block('form_widget_simple') -}}
    <div class="input-group-append d-print-none">
        <button class="btn btn-outline-secondary" type="button" id="btn-url">{{ 'parameters.action_display'|trans }}</button>
    </div>
</div>
{%- endblock %}

{% block _parameters_message_sub_title_widget -%}
<div class="input-group">
    {{- block('choice_widget') -}}
    <div class="input-group-append d-print-none">
        <button class="btn btn-outline-secondary" type="button" id="btn-notify">{{ 'parameters.action_test'|trans }}</button>
    </div>
</div>
{%- endblock %}

{# imports #}
{% form_theme form with _self %}

{# parameters #}
{%- set title       = 'parameters.title' -%}
{%- set title_icon  = 'cogs' -%}
{%- set super_admin  = is_granted('ROLE_SUPER_ADMIN') -%}
{%- set cancel_path = path('homepage') -%}
{%- set form_attr   = form_attr|default({})|merge({
						'data-random': url('ajax_random_text'),
						'data-title': 'parameters.title'|trans,
						'data-failure': 'parameters.failure'|trans}) -%}

{% block card_header -%}
{{ parent() }}
<p class="ml-4 mb-0">{{ 'parameters.description'|trans }}
{%- endblock %}

{% block card_body -%}
<label class="horizontal-line font-weight-bold">{{ 'parameters.group_customer'|trans }}</label>
{{ form_row(form.customer_name) }}
{{ form_row(form.customer_url) }}
<label class="horizontal-line font-weight-bold">{{ 'parameters.group_default'|trans }}</label>
<div class="form-row ml-2">
	<div class="col-md-4">
		{{ form_row(form.default_state) }}
	</div>
	<div class="col-md-4">
		{{ form_row(form.edit_action) }}
	</div>
	 <div class="col-md-4">
        {{ form_row(form.minimum_margin) }}
    </div>
</div>
<label class="horizontal-line font-weight-bold">{{ 'parameters.group_message'|trans }}</label>
<div class="form-row ml-2">
    <div class="col-md-4">
        {{ form_row(form.message_position) }}
    </div>
    <div class="col-md-4">
        {{ form_row(form.message_timeout) }}
    </div>
    <div class="col-md-4">
        {{ form_row(form.message_sub_title) }}
    </div>
</div>
<label class="horizontal-line font-weight-bold">{{ 'parameters.group_display'|trans }}</label>
<div class="form-row ml-2">
    <div class="col">
        {{ form_row(form.display_tabular) }}
    </div>
</div>
{% if super_admin %}
<div class="form-row ml-2">
	<div class="col-md-6">
		{{ form_row(form.date_format) }}
	</div>
	<div class="col-md-6">
		{{ form_row(form.time_format) }}
	</div>
</div>
<div class="form-row ml-2">
	<div class="col-md-6">
		{{ form_row(form.grouping_separator) }}
	</div>
	<div class="col-md-6">
		{{ form_row(form.decimal_separator) }}
	</div>
</div>
<label class="horizontal-line font-weight-bold">{{ 'parameters.group_security'|trans }}</label>
<div class="form-row ml-2">
    <div class="col-md-6">
        {{ form_row(form.display_captcha) }}
    </div>
    <div class="col-md-6">
        {{ form_row(form.min_strength) }}
    </div>
</div>
<label class="horizontal-line font-weight-bold">{{ 'parameters.group_password'|trans }}</label>
<div class="ml-2">
    {{ form_rest(form) }}
</div>
{% endif %}
{%- endblock %}

{% block actions_form -%}
{{ parent() }}
<a href="#" id="default" class="btn btn-form btn-outline-success">{{ 'theme.default'|trans }}</a>
{%- endblock %}

{% block javascripts %}
{% if app.debug %}
{{ parent() }}
{{ asset_js('js/application/parameters_edit.js') }}
{% else %}
{{ asset_js('js/parameters_edit.js') }}
{% endif %}
{% endblock %}
