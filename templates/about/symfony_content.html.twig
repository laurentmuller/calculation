{% import 'about/_about_macro.html.twig' as tools %}
{# parameters #}
{%- set bundles = service.bundles|default([]) -%}
{%- set runtime_packages = service.packages.runtime|default([]) -%}
{%- set debug_packages = service.packages.debug|default([]) -%}
{%- set runtime_routes = service.routes.runtime|default([]) -%}
{%- set debug_routes = service.routes.debug|default([]) -%}
{# content #}
<div class="phpversion">
    <table id="data-table-symfony" class="table table-hover table-sm mb-0">
        <tbody>
            <tr class="h">
                <td colspan="2" style="transform: rotate(0);">
                    <a href="https://symfony.com/" target="_blank" rel="noopener noreferrer" class="stretched-link text-reset" title="{{ 'about.extern_link'|trans }}">
                        <i class="icon-symfony icon-about"></i>
                        <h1 class="p text-body">{{ 'about.version'|trans({'%version%': service.version}) }}</h1>
                    </a>
                </td>
            </tr>
            {{ tools.headerInfo('Kernel') }}
            {{ tools.rowInfo('Environment', app.environment) }}
            {{ tools.rowInfo('Mode', app_mode) }}
            {{ tools.rowInfo('Version status', service.maintenanceStatus) }}
            {{ tools.rowInfo('End of maintenance', service.endOfMaintenance) }}
            {{ tools.rowInfo('End of product life', service.endOfLife) }}

            {{ tools.headerInfo('Parameters') }}
            {{ tools.rowInfo('Intl Locale', locale) }}
            {{ tools.rowInfo('Timezone', service.timezone) }}
            {{ tools.rowInfo('Charset', service.charset) }}

            {{ tools.headerInfo('Extensions') }}
            {{ tools.rowInfoBoolean('Debug', app.debug ? 'Enabled' : 'Disabled', app.debug) }}
            {{ tools.rowInfoBoolean('OP Cache', service.zendCacheLoaded ? 'Enabled' : 'Disabled', service.zendCacheLoaded) }}
            {{ tools.rowInfoBoolean('APCu', service.apcuLoaded ? 'Enabled' : 'Disabled', service.apcuLoaded) }}
            {{ tools.rowInfoBoolean('Xdebug', service.xdebugLoaded ? 'Enabled' : 'Disabled', service.xdebugLoaded) }}

            {{ tools.headerInfo('Directories') }}
            {{ tools.rowInfo('Project', service.projectDir) }}
            {{ tools.rowInfo('Logs', service.logInfo) }}
            {{ tools.rowInfo('Cache', service.cacheInfo) }}
        </tbody>
    </table>
    {# Configuration #}
    <table id="data-table-bundles" class="table table-hover table-sm mb-0">
        {{ tools.headerInfo("Configuration") }}
    </table>
    <div class="accordion" id="symfonyAccordion">
        {% if bundles|length %}
        <table id="data-table-bundles" class="table table-hover table-sm mb-0">
            {{ tools.headerLinkInfo('Bundles', 'bundles', bundles) }}
            <tbody class="collapse" id="bundles" data-parent="#symfonyAccordion">
            {% for bundle in service.bundles %}
                {{ tools.rowBundle(bundle) }}
            {% endfor %}
            </tbody>
        </table>
        {% endif %}
        {# runtime packages #}
        {% if runtime_packages|length %}
        <table id="data-table-runtime-packages" class="table table-hover table-sm mb-0">
            {{ tools.headerLinkInfo('Packages', 'runtime-packages', runtime_packages, 3) }}
            <tbody class="collapse" id="runtime-packages" data-parent="#symfonyAccordion">
            {% for package in runtime_packages %}
                {{ tools.rowPackage(package) }}
            {% endfor %}
            </tbody>
        </table>
        {% endif %}
        {# debug packages #}
        {% if debug_packages|length %}
        <table id="data-table-development-packages" class="table table-hover table-sm mb-0">
            {{ tools.headerLinkInfo('Debug Packages', 'development-packages', debug_packages, 3) }}
            <tbody class="collapse" id="development-packages" data-parent="#symfonyAccordion">
            {% for package in debug_packages %}
                {{ tools.rowPackage(package) }}
            {% endfor %}
            </tbody>
        </table>
        {% endif %}
        {# runtime routes #}
        {% if runtime_routes|length %}
        <table id="data-table-routes" class="table table-hover table-sm mb-0">
            {{ tools.headerLinkInfo('Routes', 'application-routes', runtime_routes) }}
            <tbody class="collapse" id="application-routes" data-parent="#symfonyAccordion">
            {% for route in runtime_routes %}
                {{ tools.rowInfo(route.name, route.path, 'ps-3') }}
            {% endfor %}
            </tbody>
        </table>
        {% endif %}
        {# debug routes #}
        {% if debug_routes|length %}
        <table id="data-table-routes-dev" class="table table-hover table-sm mb-0">
            {{ tools.headerLinkInfo('Debug Routes', 'symfony-routes', debug_routes) }}
            <tbody class="collapse" id="symfony-routes" data-parent="#symfonyAccordion">
            {% for route in debug_routes %}
                {{ tools.rowInfo(route.name, route.path, 'ps-3') }}
            {% endfor %}
            </tbody>
        </table>
        {% endif %}
     </div>
</div>
