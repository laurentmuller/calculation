{% extends 'calculation/calculation_card.html.twig' %}

{# macros #}
{% macro printItem(item) -%}
{% import 'macros/_properties.html.twig' as properties %}
{{- properties.line(item.description ~ ' (' ~ item.count|integer ~ ')', 'text-danger', 1) -}}
{%- endmacro %}

{# imports #}
{% import 'macros/_icons.html.twig' as icons %}

{# parameters #}
{%- set title        = 'duplicate.title' -%}
{%- set title_icon   = 'copy far' -%}
{%- set empty_list   = 'duplicate.empty' -%}
{%- set caller       = path(app.request.attributes.get('_route')) -%}

{# actions #}
{%- set add_page     = false -%}
{%- set delete_page  = false -%}
{%- set pdf_page     = false -%}
{%- set state_page   = false -%}
{%- set clone_page   = false -%}
{%- set col_span     = 1 -%}

{% block search_action %}{% endblock %}

{% block card_header -%}
{{ parent() }}
<p class="ml-4 mb-0">{{ 'duplicate.description'|trans }}</p>
{% if items|length %}<p class="ml-4 mb-0">{{ 'duplicate.count'|trans({'%calculations%': items|length, '%items%': items_count}) }}</p>{% endif %}
{%- endblock %}

{% block calculation_properties -%}
{% for child in item.items %}{{ _self.printItem(child) }}{% endfor %}
{%- endblock %}

{%- block card_footer_class '' -%}
{% block card_footer -%}
{{ icons.homepage() }}
{% if items|length %}{{- icons.button_pdf('calculation_duplicate_pdf') }}{% endif %}
{%- endblock %}
